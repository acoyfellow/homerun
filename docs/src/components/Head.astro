---
/**
 * Custom Head â€” extends Starlight's default Head with:
 * - Dynamic OG images per page
 * - Twitter card meta
 * - JSON-LD structured data
 */
const route = Astro.locals.starlightRoute;
const { head } = route;

const siteUrl = 'https://unsurf.coey.dev';
const slug = route.id || 'index';
const ogImageUrl = `${siteUrl}/og/${slug}.png`;
const canonicalUrl = slug === 'index' ? siteUrl : `${siteUrl}/${slug}/`;
const title = route.entry.data.title;
const description = route.entry.data.description || 'Turn any website into a typed API.';

const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: title,
  description,
  url: canonicalUrl,
  image: ogImageUrl,
  isPartOf: {
    '@type': 'WebSite',
    name: 'unsurf',
    url: siteUrl,
  },
  publisher: {
    '@type': 'Organization',
    name: 'unsurf',
    url: siteUrl,
    logo: {
      '@type': 'ImageObject',
      url: `${siteUrl}/og/index.png`,
    },
  },
};
---

{/* Default Starlight head tags */}
{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}

{/* OG Image */}
<meta property="og:image" content={ogImageUrl} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:type" content="image/png" />

{/* Twitter Card */}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={ogImageUrl} />
<meta name="twitter:site" content="@acoyfellow" />

{/* JSON-LD */}
<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
