---
title: How to scout a website
description: Capture API endpoints from any site using the scout tool.
---

import { Aside, Steps } from '@astrojs/starlight/components';

## Basic scout

```bash
curl -X POST $UNSURF_URL/tools/scout \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "task": "find the contact form and map how it submits"
  }'
```

The `task` field guides the scout's exploration. Be specific about what you want to find.

## Writing effective tasks

Good tasks are specific and action-oriented:

| ✅ Good | ❌ Bad |
|---|---|
| "find the contact form and map how it submits" | "explore the site" |
| "navigate to the dashboard and capture all data-loading endpoints" | "find APIs" |
| "add an item to cart and capture the checkout flow" | "test the store" |

## Scouting authenticated sites

If the target site requires authentication, pass cookies or headers:

```json
{
  "url": "https://app.example.com/dashboard",
  "task": "capture all data-loading endpoints on the dashboard",
  "auth": {
    "cookies": "session=abc123; token=xyz",
    "headers": {
      "Authorization": "Bearer your-token"
    }
  }
}
```

<Aside type="caution">
Auth tokens are stored temporarily in memory during the scout session and are not persisted to D1 or R2.
</Aside>

## Force a fresh scout

By default, scout results are cached per URL in the gallery. To bypass the cache and run a fresh scout, set `force`:

```json
{
  "url": "https://example.com",
  "task": "find the contact form and map how it submits",
  "force": true
}
```

This is useful when the target site has changed since the last scout, or when you want to capture a different set of endpoints for the same URL.

## Reading scout results

The response includes:

- **`siteId`** — use this to query endpoints later
- **`endpointCount`** — total unique endpoints found
- **`pathId`** — the navigation path taken, replayable by the worker
- **`openApiSpec`** — complete OpenAPI 3.1 JSON

## Auto-publish to the directory

Set `publish` to automatically add the scouted API to the public directory once the scout completes:

```json
{
  "url": "https://example.com",
  "task": "find the contact form and map how it submits",
  "publish": true
}
```

When `publish` is `true`, the scouted API and its OpenAPI spec are immediately visible in the directory. If omitted or `false`, results are private to your account until you publish manually.

## Retrieving the OpenAPI spec

```bash
curl $UNSURF_URL/sites/{siteId}/openapi
```

This returns a valid OpenAPI 3.1 specification you can import into any tool that consumes OpenAPI — Postman, Swagger UI, `openapi-typescript`, etc.

## Listing captured endpoints

```bash
curl $UNSURF_URL/sites/{siteId}/endpoints
```

Each endpoint includes:
- `method` and `pathPattern` — e.g., `GET /users/:id`
- `requestSchema` — inferred JSON Schema for request body
- `responseSchema` — inferred JSON Schema for response body
- `sampleCount` — how many times this endpoint was observed
